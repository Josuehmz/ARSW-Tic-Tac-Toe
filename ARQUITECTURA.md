# ğŸ—ï¸ Arquitectura del Sistema Tic-Tac-Toe Multijugador

## ğŸ“ Diagrama de Arquitectura General

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        CAPA DE PRESENTACIÃ“N                      â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                 React Frontend (SPA)                       â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”‚  Components  â”‚  â”‚    Hooks     â”‚  â”‚     State    â”‚   â”‚ â”‚
â”‚  â”‚  â”‚   - Board    â”‚  â”‚  - useState  â”‚  â”‚   - game     â”‚   â”‚ â”‚
â”‚  â”‚  â”‚   - Square   â”‚  â”‚  - useEffect â”‚  â”‚   - player   â”‚   â”‚ â”‚
â”‚  â”‚  â”‚   - Players  â”‚  â”‚  - useRef    â”‚  â”‚   - message  â”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”‚         WebSocket Client (STOMP.js)              â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  - ConexiÃ³n bidireccional                        â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  - Suscripciones a topics                        â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  - PublicaciÃ³n de mensajes                       â”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚ WebSocket/STOMP Protocol
                             â”‚ (ComunicaciÃ³n Full-Duplex)
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     CAPA DE COMUNICACIÃ“N                           â”‚
â”‚                                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚              Spring WebSocket + STOMP                        â”‚â”‚
â”‚  â”‚                                                              â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚  â”‚  â”‚  WebSocket Config                                      â”‚ â”‚â”‚
â”‚  â”‚  â”‚  - Registrar endpoints (/ws)                          â”‚ â”‚â”‚
â”‚  â”‚  â”‚  - Configurar message broker (/topic, /app)          â”‚ â”‚â”‚
â”‚  â”‚  â”‚  - Habilitar SockJS fallback                         â”‚ â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚  â”‚                                                              â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚  â”‚  â”‚  Message Broker (Simple In-Memory)                    â”‚ â”‚â”‚
â”‚  â”‚  â”‚  - Routing de mensajes                                â”‚ â”‚â”‚
â”‚  â”‚  â”‚  - Broadcasting a suscriptores                        â”‚ â”‚â”‚
â”‚  â”‚  â”‚  - GestiÃ³n de sesiones                                â”‚ â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚ Invoca
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        CAPA DE APLICACIÃ“N                          â”‚
â”‚                                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                    Controllers (@Controller)                 â”‚â”‚
â”‚  â”‚                                                              â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚â”‚
â”‚  â”‚  â”‚  GameController                                     â”‚   â”‚â”‚
â”‚  â”‚  â”‚                                                     â”‚   â”‚â”‚
â”‚  â”‚  â”‚  @MessageMapping("/game/create")                   â”‚   â”‚â”‚
â”‚  â”‚  â”‚  @MessageMapping("/game/join")                     â”‚   â”‚â”‚
â”‚  â”‚  â”‚  @MessageMapping("/game/move")                     â”‚   â”‚â”‚
â”‚  â”‚  â”‚  @MessageMapping("/game/power")                    â”‚   â”‚â”‚
â”‚  â”‚  â”‚                                                     â”‚   â”‚â”‚
â”‚  â”‚  â”‚  @GetMapping("/api/games")                         â”‚   â”‚â”‚
â”‚  â”‚  â”‚  @PostMapping("/api/games")                        â”‚   â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚ Delega lÃ³gica a
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CAPA DE NEGOCIO                               â”‚
â”‚                                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                   Services (@Service)                        â”‚â”‚
â”‚  â”‚                                                              â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚â”‚
â”‚  â”‚  â”‚  GameService                                        â”‚   â”‚â”‚
â”‚  â”‚  â”‚                                                     â”‚   â”‚â”‚
â”‚  â”‚  â”‚  + createGame()                                    â”‚   â”‚â”‚
â”‚  â”‚  â”‚  + getGame(gameId)                                 â”‚   â”‚â”‚
â”‚  â”‚  â”‚  + joinGame(gameId, username)                      â”‚   â”‚â”‚
â”‚  â”‚  â”‚  + makeMove(gameId, playerId, position)           â”‚   â”‚â”‚
â”‚  â”‚  â”‚  + usePower(gameId, playerId, power, target)      â”‚   â”‚â”‚
â”‚  â”‚  â”‚  + removePlayer(gameId, playerId)                 â”‚   â”‚â”‚
â”‚  â”‚  â”‚  + resetGame(gameId)                              â”‚   â”‚â”‚
â”‚  â”‚  â”‚                                                     â”‚   â”‚â”‚
â”‚  â”‚  â”‚  LÃ³gica:                                           â”‚   â”‚â”‚
â”‚  â”‚  â”‚  - Validaciones de jugadas                        â”‚   â”‚â”‚
â”‚  â”‚  â”‚  - DetecciÃ³n de ganadores                         â”‚   â”‚â”‚
â”‚  â”‚  â”‚  - AplicaciÃ³n de efectos de celdas               â”‚   â”‚â”‚
â”‚  â”‚  â”‚  - GestiÃ³n de poderes                            â”‚   â”‚â”‚
â”‚  â”‚  â”‚  - Control de turnos                             â”‚   â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚ Opera sobre
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CAPA DE DOMINIO                               â”‚
â”‚                                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                  Modelos de Dominio                          â”‚â”‚
â”‚  â”‚                                                              â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚â”‚
â”‚  â”‚  â”‚     Game     â”‚  â”‚    Player    â”‚  â”‚     Cell     â”‚     â”‚â”‚
â”‚  â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚     â”‚â”‚
â”‚  â”‚  â”‚ - gameId     â”‚  â”‚ - id         â”‚  â”‚ - position   â”‚     â”‚â”‚
â”‚  â”‚  â”‚ - players    â”‚  â”‚ - username   â”‚  â”‚ - value      â”‚     â”‚â”‚
â”‚  â”‚  â”‚ - board      â”‚  â”‚ - symbol     â”‚  â”‚ - type       â”‚     â”‚â”‚
â”‚  â”‚  â”‚ - status     â”‚  â”‚ - score      â”‚  â”‚ - isRevealed â”‚     â”‚â”‚
â”‚  â”‚  â”‚ - turnCount  â”‚  â”‚ - powers     â”‚  â”‚ - isBlocked  â”‚     â”‚â”‚
â”‚  â”‚  â”‚              â”‚  â”‚ - isActive   â”‚  â”‚              â”‚     â”‚â”‚
â”‚  â”‚  â”‚ makeMove()   â”‚  â”‚ addPower()   â”‚  â”‚ isPlayable() â”‚     â”‚â”‚
â”‚  â”‚  â”‚ checkWinner()â”‚  â”‚ usePower()   â”‚  â”‚              â”‚     â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚â”‚
â”‚  â”‚                                                              â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚â”‚
â”‚  â”‚  â”‚  PowerType   â”‚  â”‚  CellType    â”‚  â”‚  GameStatus  â”‚     â”‚â”‚
â”‚  â”‚  â”‚   (Enum)     â”‚  â”‚   (Enum)     â”‚  â”‚   (Enum)     â”‚     â”‚â”‚
â”‚  â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚     â”‚â”‚
â”‚  â”‚  â”‚ EXTRA_TURN   â”‚  â”‚ NORMAL       â”‚  â”‚ WAITING      â”‚     â”‚â”‚
â”‚  â”‚  â”‚ REMOVE_OPP   â”‚  â”‚ TRAP         â”‚  â”‚ ACTIVE       â”‚     â”‚â”‚
â”‚  â”‚  â”‚ SWAP_PIECES  â”‚  â”‚ POWER        â”‚  â”‚ PAUSED       â”‚     â”‚â”‚
â”‚  â”‚  â”‚ REVEAL_TRAP  â”‚  â”‚ FAKE         â”‚  â”‚ FINISHED     â”‚     â”‚â”‚
â”‚  â”‚  â”‚ BLOCK_CELL   â”‚  â”‚ DOUBLE_PTS   â”‚  â”‚              â”‚     â”‚â”‚
â”‚  â”‚  â”‚ TRIPLE_PLAY  â”‚  â”‚ REVERSE      â”‚  â”‚              â”‚     â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚ Almacenado en
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CAPA DE PERSISTENCIA                            â”‚
â”‚                                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚              ConcurrentHashMap (En Memoria)                  â”‚â”‚
â”‚  â”‚                                                              â”‚â”‚
â”‚  â”‚  Map<String, Game> games = new ConcurrentHashMap<>();       â”‚â”‚
â”‚  â”‚                                                              â”‚â”‚
â”‚  â”‚  Nota: En producciÃ³n usar DB real:                          â”‚â”‚
â”‚  â”‚  - MongoDB para estructura flexible                         â”‚â”‚
â”‚  â”‚  - PostgreSQL para transacciones ACID                       â”‚â”‚
â”‚  â”‚  - Redis para cachÃ© de sesiones                            â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Flujo de Datos: Hacer una Jugada

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Usuario    â”‚
â”‚  (Jugador 1) â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 1. Click en celda
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         React Component              â”‚
â”‚     handleSquareClick(position)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”‚ 2. Publicar mensaje STOMP
               â”‚    Destino: /app/game/move
               â”‚    Body: {gameId, playerId, position}
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        WebSocket Client              â”‚
â”‚        stompClient.publish()         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”‚ 3. Mensaje WebSocket
               â†“
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘      Spring WebSocket Server         â•‘
â•‘        (Puerto 8080)                 â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â”¬â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
               â”‚
               â”‚ 4. Rutear mensaje
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        GameController                â”‚
â”‚   @MessageMapping("/game/move")      â”‚
â”‚   makeMove(MoveRequest request)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”‚ 5. Validar y procesar
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         GameService                  â”‚
â”‚   makeMove(gameId, playerId, pos)    â”‚
â”‚                                      â”‚
â”‚   1. Validar turno del jugador       â”‚
â”‚   2. Validar celda disponible        â”‚
â”‚   3. Colocar pieza                   â”‚
â”‚   4. Aplicar efecto de celda         â”‚
â”‚   5. Verificar ganador               â”‚
â”‚   6. Avanzar turno                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”‚ 6. Actualizar modelo
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Game                      â”‚
â”‚   board.get(pos).setValue(symbol)    â”‚
â”‚   applyCellEffect(cell, player)      â”‚
â”‚   checkWinner()                      â”‚
â”‚   nextPlayer()                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”‚ 7. Retornar resultado
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        GameController                â”‚
â”‚   Crear GameMessage                  â”‚
â”‚   messagingTemplate.convertAndSend   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”‚ 8. Broadcast a todos
               â”‚    Destino: /topic/game/{gameId}
               â†“
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘         Message Broker               â•‘
â•‘   Enviar a todos los suscriptores    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â”¬â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
               â”‚
               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚                     â”‚                      â”‚
               â†“                     â†“                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Cliente 1       â”‚  â”‚  Cliente 2       â”‚  â”‚  Cliente 3       â”‚
â”‚  (Jugador 1)     â”‚  â”‚  (Jugador 2)     â”‚  â”‚  (Espectador)    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                     â”‚                      â”‚
       â”‚ 9. Recibir mensaje  â”‚                      â”‚
       â†“                     â†“                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  WebSocket       â”‚  â”‚  WebSocket       â”‚  â”‚  WebSocket       â”‚
â”‚  onMessage       â”‚  â”‚  onMessage       â”‚  â”‚  onMessage       â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                     â”‚                      â”‚
       â”‚ 10. Actualizar UI   â”‚                      â”‚
       â†“                     â†“                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  React           â”‚  â”‚  React           â”‚  â”‚  React           â”‚
â”‚  setGame(game)   â”‚  â”‚  setGame(game)   â”‚  â”‚  setGame(game)   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                     â”‚                      â”‚
       â”‚ 11. Re-render       â”‚                      â”‚
       â†“                     â†“                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  UI Actualizado  â”‚  â”‚  UI Actualizado  â”‚  â”‚  UI Actualizado  â”‚
â”‚  âœ“ Celda marcada â”‚  â”‚  âœ“ Celda marcada â”‚  â”‚  âœ“ Celda marcada â”‚
â”‚  âœ“ Turno cambia  â”‚  â”‚  âœ“ Es su turno   â”‚  â”‚  âœ“ Ve jugada     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Patrones de DiseÃ±o Utilizados

### 1. **Observer Pattern** (WebSocket/STOMP)
- **Problema**: MÃºltiples clientes necesitan ser notificados de cambios
- **SoluciÃ³n**: SuscripciÃ³n a topics, broadcast automÃ¡tico
- **ImplementaciÃ³n**: 
  ```java
  messagingTemplate.convertAndSend("/topic/game/" + gameId, message);
  ```

### 2. **Command Pattern** (Message Mapping)
- **Problema**: Encapsular requests como objetos
- **SoluciÃ³n**: DTOs (MoveRequest, JoinGameRequest, PowerRequest)
- **ImplementaciÃ³n**:
  ```java
  @MessageMapping("/game/move")
  public void makeMove(MoveRequest request) { ... }
  ```

### 3. **State Pattern** (GameStatus, CellType)
- **Problema**: Comportamiento cambia segÃºn estado
- **SoluciÃ³n**: Enums con estados bien definidos
- **ImplementaciÃ³n**:
  ```java
  public enum GameStatus {
      WAITING, ACTIVE, PAUSED, FINISHED
  }
  ```

### 4. **Strategy Pattern** (Cell Effects)
- **Problema**: Diferentes efectos segÃºn tipo de celda
- **SoluciÃ³n**: Switch case en `applyCellEffect()`
- **ImplementaciÃ³n**:
  ```java
  switch (cell.getType()) {
      case TRAP: return CellEffect.SKIP_TURN;
      case POWER: return CellEffect.POWER_GAINED;
      ...
  }
  ```

### 5. **Singleton Pattern** (GameService)
- **Problema**: Una sola instancia del servicio
- **SoluciÃ³n**: Spring @Service (singleton por defecto)
- **ImplementaciÃ³n**:
  ```java
  @Service
  public class GameService { ... }
  ```

### 6. **Repository Pattern** (aunque simplificado)
- **Problema**: Separar lÃ³gica de persistencia
- **SoluciÃ³n**: ConcurrentHashMap como store
- **ImplementaciÃ³n**:
  ```java
  private final Map<String, Game> games = new ConcurrentHashMap<>();
  ```

---

## ğŸ” Consideraciones de Seguridad

### Vulnerabilidades Actuales (Proyecto Educativo)

1. **Sin AutenticaciÃ³n**
   - Cualquiera puede unirse con cualquier nombre
   - No hay verificaciÃ³n de identidad

2. **Sin AutorizaciÃ³n**
   - Jugadores podrÃ­an hacer jugadas fuera de turno (validado en backend pero sin auth)

3. **CORS Abierto**
   ```java
   .setAllowedOriginPatterns("*")  // âš ï¸ Permitir cualquier origen
   ```

4. **Sin Rate Limiting**
   - Un cliente podrÃ­a enviar miles de mensajes

5. **Datos en Memoria**
   - Se pierden al reiniciar el servidor

### Mejoras Recomendadas para ProducciÃ³n

```java
// 1. Agregar Spring Security
@Configuration
@EnableWebSocketSecurity
public class WebSocketSecurityConfig {
    @Bean
    public SecurityFilterChain filterChain(HttpSecurity http) {
        http
            .authorizeRequests()
            .anyRequest().authenticated()
            .and()
            .oauth2Login();
        return http.build();
    }
}

// 2. Validar jugador en cada acciÃ³n
@MessageMapping("/game/move")
public void makeMove(MoveRequest request, Principal principal) {
    // Verificar que principal.getName() == request.getPlayerId()
    if (!isAuthorized(principal, request.getPlayerId())) {
        throw new UnauthorizedException();
    }
    // ... procesar jugada
}

// 3. Rate Limiting
@Component
public class RateLimitInterceptor implements ChannelInterceptor {
    private final RateLimiter rateLimiter = 
        RateLimiter.create(10.0); // 10 requests/segundo
    
    @Override
    public Message<?> preSend(Message<?> message, MessageChannel channel) {
        if (!rateLimiter.tryAcquire()) {
            throw new RateLimitExceededException();
        }
        return message;
    }
}

// 4. Persistencia con MongoDB
@Document(collection = "games")
public class Game {
    @Id
    private String gameId;
    // ... resto de campos
}

@Repository
public interface GameRepository extends MongoRepository<Game, String> {
    List<Game> findByStatus(GameStatus status);
}
```

---

## ğŸ“Š Escalabilidad

### Limitaciones Actuales

1. **Single Server**
   - Todos los juegos en un servidor
   - Si se cae, se pierden todos los juegos

2. **In-Memory Storage**
   - Limitado por RAM del servidor
   - ~1000 juegos simultÃ¡neos mÃ¡ximo

3. **Message Broker Simple**
   - No distribuido
   - No persistente

### Arquitectura Escalable (Futuro)

```
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ Load Balancerâ”‚
                        â”‚   (Nginx)    â”‚
                        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                  â”‚                  â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
     â”‚  Server 1   â”‚   â”‚   Server 2   â”‚  â”‚  Server 3   â”‚
     â”‚ Spring Boot â”‚   â”‚ Spring Boot  â”‚  â”‚ Spring Boot â”‚
     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
            â”‚                  â”‚                 â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                                     â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
     â”‚  RabbitMQ     â”‚                   â”‚  MongoDB     â”‚
     â”‚  (Distributed â”‚                   â”‚  (Cluster)   â”‚
     â”‚   Broker)     â”‚                   â”‚              â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Ventajas:
âœ“ MÃºltiples servidores (alta disponibilidad)
âœ“ RabbitMQ para mensajes distribuidos
âœ“ MongoDB para persistencia
âœ“ Escalado horizontal
```

---

## ğŸ§ª Testing

### Estructura de Tests (Recomendada)

```java
// Unit Tests
@SpringBootTest
class GameServiceTest {
    @Test
    void testCreateGame() {
        Game game = gameService.createGame();
        assertNotNull(game.getGameId());
        assertEquals(GameStatus.WAITING, game.getStatus());
    }
    
    @Test
    void testMakeMoveValidation() {
        // Given
        Game game = gameService.createGame();
        Player player = gameService.joinGame(game.getGameId(), "Test");
        
        // When
        MoveResult result = gameService.makeMove(
            game.getGameId(), 
            "wrong-id",  // ID incorrecto
            0
        );
        
        // Then
        assertFalse(result.isSuccess());
    }
}

// Integration Tests
@SpringBootTest(webEnvironment = WebEnvironment.RANDOM_PORT)
class GameControllerIntegrationTest {
    @LocalServerPort
    private int port;
    
    @Test
    void testWebSocketConnection() {
        // Probar conexiÃ³n WebSocket completa
    }
}
```

---

## ğŸ“ˆ MÃ©tricas y Monitoreo

### Endpoints Ãštiles (Agregar Spring Actuator)

```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-actuator</artifactId>
</dependency>
```

```properties
# application.properties
management.endpoints.web.exposure.include=health,info,metrics
```

**Endpoints disponibles:**
- `GET /actuator/health` - Estado del servidor
- `GET /actuator/metrics` - MÃ©tricas de performance
- `GET /actuator/info` - InformaciÃ³n de la app

---

**Esta arquitectura demuestra principios sÃ³lidos de diseÃ±o de software, comunicaciÃ³n en tiempo real y escalabilidad incremental. ğŸš€**

